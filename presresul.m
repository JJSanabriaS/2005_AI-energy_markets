

%inicio de la validación
[seriet];
tam=size(ans);
seriet1=[seriet;seriev;pr31];
pesosval=[pesos1;pesos2];
tam1=size(seriet1);
while tam1(1)>tam(1)
   seriet1(1,:)=[];
   pesosval(1,:)=[];
   tam1(1)=tam1(1)-1;
end
[seriet1,minseriev,maxseriev]=premnmx(seriet1);
seriet1=[seriet1 pesosval];
tam=size(seriet);
y=(sim(red,seriet1(1:tam(1),:)));
y=postmnmx(y,(minserieob),(maxserieob));
figure
set(gcf,'numbertitle','off');
set(gcf,'name','Prueba de la red');
set(gcf,'color',[1 1 1]);
set(gcf,'position',[0 25 650 420]);
tam=size(pr2);
subplot(2,1,1);
y=mean(y);
pra=mean(t2);
tam=size(serie2);
plot(serie2(tam(1),:),'r');
hold;
plot(y(:,1:1:tam(2)).*ciclo.*t(:,1:1:tam(2)),'g');

text(14.5,li+10,vect(1,:)); text(34.5,li+10,vect(2,:)); 
text(64.5,li+10,vect(3,:)); text(84.5,li+10,vect(4,:)); 
text(104.5,li+10,vect(5,:));text(130.5,li+10,vect(6,:));
text(154.5,li+10,vect(7,:));
pra=serie2(tam(1),:);
a=y(:,1:1:tam(2)).*ciclo.*t(:,1:1:tam(2));
%plot(y1.*ciclo.*t1(:,1:1:tam(2)),'y')
ylabel(ulabel);
ta=size(fechas);
ult=fechas(ta(1));
inicio=fechas(ta(1)-6);
cadena=strcat('Datos ultima semana-',num2str(inicio),'-',num2str(ult),'(real (rojo),RNA(verde))');
title(cadena);
e=abs(pra-a);
e1=abs(pra-a)./pra;
larg=tam(2);
mad1=(sum(e)/larg); 
emc1=sqrt(((sum((e).^2))/larg));  
mape1=(sum(e1)/larg)*100;
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 138.25 297 15.75], ...
   'String','Tipo de red', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 138.25 297 15.75], ...
   'String',tipored, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 123.25 297 15.75], ...
   'String','Función de aprendizaje', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 123.25 297 15.75], ...
   'String',faprendiza, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 108.25 297 15.75], ...
   'String','Función de entrenamiento', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 108.25 297 15.75], ...
   'String',fentrena, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 93.25 297 15.75], ...
   'String','Numero de capas (oculta)', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 93.25 297 15.75], ...
   'String',nc, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');

h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 78.25 297 15.75], ...
   'String','Desv abs. de la media (MAD)', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 78.25 197 15.75], ...
   'String',mad1, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[373 78.25 30 15.75], ...
   'String',ulabel, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');



h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 63.25 297 15.75], ...
   'String','Raíz del error medio cuadrado (RMSE)', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
	'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 63.25 197 15.75], ...
   'String',emc1, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[373 63.25 30 15.75], ...
   'String',ulabel, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[63 48.25 297 15.75], ...
   'String','Porcentaje de error medio abs. (MAPE) ', ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');

h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
	'ListboxTop',0, ...
	'Position',[313 48.25 197 15.75], ...
   'String',mape1, ...
	'BackgroundColor',[1 1 1],...   
	'Style','text', ...
   'Tag','StaticText1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'fontname','MS Sans Serif',...
   'fontsize',10,...
	'HorizontalAlignment','left', ...
   'ListboxTop',0, ...
   'BackgroundColor',[1 1 1],... 
	'Position',[373 48.25 30 15.75], ...
   'String','%', ...
	'Style','text', ...
   'Tag','StaticText1');

h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'Callback','salvar', ...
	'ListboxTop',0, ...
	'Position',[20 15 90 14], ...
   'String','Salvar RNA Actual', ...
   'Tag','Pushbutton1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'Callback','predice', ...
	'ListboxTop',0, ...
	'Position',[130 15 90 14], ...
   'String','Predecir con RNA actual', ...
   'Tag','Pushbutton1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'Callback','reent', ...
	'ListboxTop',0, ...
	'Position',[240 15 90 14], ...
   'String','Reentrenar RNA actual', ...
   'Tag','Pushbutton1');
h1 = uicontrol(gcf, ...
	'Units','points', ...
	'BackgroundColor',[0.752941176470588 0.752941176470588 0.752941176470588], ...
	'Callback','close', ...
	'ListboxTop',0, ...
	'Position',[350 15 90 14], ...
   'String','Abandonar', ...
   'Callback','close all,princip',...
   'Tag','Pushbutton1');